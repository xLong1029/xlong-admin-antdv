(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9417c45c"],{"39e8":function(e,r,t){},aef7:function(e,r,t){"use strict";t.r(r);var n=t("dbba"),o=Object(n["withScopeId"])("data-v-b395dcb0");Object(n["pushScopeId"])("data-v-b395dcb0");var a={class:"change-password-container"},c=Object(n["createTextVNode"])("提交修改"),u=Object(n["createTextVNode"])("重置");Object(n["popScopeId"])();var s=o((function(e,r){var t=Object(n["resolveComponent"])("a-input-password"),s=Object(n["resolveComponent"])("a-form-item"),l=Object(n["resolveComponent"])("a-button"),i=Object(n["resolveComponent"])("a-space"),d=Object(n["resolveComponent"])("a-form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[Object(n["createVNode"])(d,{ref:"submitForm",model:e.form,rules:e.rules,"label-col":{span:e.labelColSpan},"wrapper-col":{span:e.wrapperColSpan}},{default:o((function(){return[Object(n["createVNode"])(s,{label:"旧密码",name:"oldPassword"},{default:o((function(){return[Object(n["createVNode"])(t,{value:e.form.oldPassword,"onUpdate:value":r[1]||(r[1]=function(r){return e.form.oldPassword=r}),placeholder:"请输入旧密码",onKeyup:Object(n["withKeys"])(e.onSubmit,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(n["createVNode"])(s,{label:"新密码",name:"newPassword"},{default:o((function(){return[Object(n["createVNode"])(t,{value:e.form.newPassword,"onUpdate:value":r[2]||(r[2]=function(r){return e.form.newPassword=r}),placeholder:"请输入新密码",onKeyup:Object(n["withKeys"])(e.onSubmit,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(n["createVNode"])(s,{label:"确认密码",name:"rePassword"},{default:o((function(){return[Object(n["createVNode"])(t,{value:e.form.rePassword,"onUpdate:value":r[3]||(r[3]=function(r){return e.form.rePassword=r}),placeholder:"请输入确认密码",onKeyup:Object(n["withKeys"])(e.onSubmit,["enter"])},null,8,["value","onKeyup"])]})),_:1}),Object(n["createVNode"])(s,{"wrapper-col":{span:e.wrapperColSpan,offset:e.labelColSpan}},{default:o((function(){return[Object(n["createVNode"])(i,{size:"small"},{default:o((function(){return[Object(n["createVNode"])(l,{type:"primary",onClick:e.onSubmit,loading:e.submitLoading},{default:o((function(){return[c]})),_:1},8,["onClick","loading"]),Object(n["createVNode"])(l,{onClick:e.handleResetForm},{default:o((function(){return[u]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["wrapper-col"])]})),_:1},8,["model","rules","label-col","wrapper-col"])])})),l=(t("845c"),t("6a61"),t("2e91")),i=t("2104"),d=t("87d3"),p=t("35ed"),b=t("61f7"),f=t("fab2"),m={name:"ChangePassword",setup:function(){var e=Object(d["b"])(),r=Object(p["d"])(),t=Object(n["computed"])((function(){return e.getters.token})),o=6,a=18,c=Object(n["reactive"])({oldPassword:"",newPassword:"",rePassword:""}),u=function(e,r){return r?Object(b["g"])(r)?Promise.resolve():Promise.reject("密码中必须包含字母、数字，长度至少为6个字符！"):Promise.reject("请输入新密码")},s=function(e,r){return r?Object(b["a"])(r,c.newPassword)?Promise.resolve():Promise.reject("两次输入密码不一致"):Promise.reject("请输入确认密码")},m=Object(n["reactive"])({oldPassword:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPassword:[{required:!0,validator:u,trigger:"blur"}],rePassword:[{required:!0,validator:s,trigger:"blur"}]}),w=Object(n["ref"])(!1),j=Object(n["ref"])(null),v=function(){j.value.validate().then(Object(l["a"])(regeneratorRuntime.mark((function o(){var a;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=Object(n["toRaw"])(c),a.oldPassword!=a.newPassword){o.next=4;break}return i["a"].error("旧密码和新密码不能相同！"),o.abrupt("return",!1);case 4:w.value=!0,f["a"].ChangePwd(a,t.value).then(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(n){var o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=n.code,a=n.msg,200!=o){t.next=17;break}return t.prev=2,t.next=5,e.dispatch("user/logout");case 5:return t.next=7,e.dispatch("permission/generateRoutes",null);case 7:i["a"].success("密码修改成功!请重新登录"),r.push({name:"Home"}),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](2),console.log(t.t0),r.push({name:"Home"});case 15:t.next=18;break;case 17:404==o?i["a"].warning(a):i["a"].error("密码修改失败！");case 18:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){return i["a"].error(e.error)})).finally((function(){return w.value=!1}));case 6:case"end":return o.stop()}}),o)})))).catch((function(e){console.log("error",e)}))},O=function(){j.value.resetFields()};return{labelColSpan:o,wrapperColSpan:a,form:c,rules:m,submitLoading:w,onSubmit:v,handleResetForm:O,submitForm:j}}};t("e34a");m.render=s,m.__scopeId="data-v-b395dcb0";r["default"]=m},e34a:function(e,r,t){"use strict";t("39e8")}}]);